"use strict";(self.webpackChunkwppconnect_team_github_io=self.webpackChunkwppconnect_team_github_io||[]).push([[41718],{3905:(e,n,a)=>{a.d(n,{Zo:()=>c,kt:()=>v});var t=a(67294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=t.createContext({}),p=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},c=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,v=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return a?t.createElement(v,s(s({ref:n},c),{},{components:a})):t.createElement(v,s({ref:n},c))}));function v(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[u]="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=a[p];return t.createElement.apply(null,s)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},32121:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var t=a(87462),r=(a(67294),a(3905));const o={title:"Installation",sidebar_position:2},s=void 0,i={unversionedId:"projects/wppserver/installation",id:"projects/wppserver/installation",title:"Installation",description:"O servidor Wppconnect \xe9 uma API pronta para usar, basta baixar, instalar e come\xe7ar a usar, simples assim.",source:"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/projects/wppserver/installation.md",sourceDirName:"projects/wppserver",slug:"/projects/wppserver/installation",permalink:"/pt-BR/docs/projects/wppserver/installation",draft:!1,editUrl:"https://github.com/wppconnect-team/wppconnect-team.github.io/tree/main/docs/projects/wppserver/installation.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Installation",sidebar_position:2},sidebar:"docs",previous:{title:"Introdu\xe7\xe3o",permalink:"/pt-BR/docs/projects/wppserver/introduction"},next:{title:"Configuration",permalink:"/pt-BR/docs/projects/wppserver/configuration"}},l={},p=[{value:"Requisitos",id:"requirements",level:2},{value:"Instala\xe7\xe3o",id:"instala\xe7\xe3o",level:2},{value:"Instalar depend\xeancias do puppeteer:",id:"instalar-depend\xeancias-do-puppeteer",level:2},{value:"Clonar reposit\xf3rio",id:"clonar-reposit\xf3rio",level:2},{value:"Instalar Google Chrome",id:"instalar-google-chrome",level:2},{value:"Subir o servidor",id:"subir-o-servidor",level:2},{value:"Compilar Servidor",id:"compilar-servidor",level:2},{value:"Resposta:",id:"resposta",level:3},{value:"Documenta\xe7\xf5es",id:"documenta\xe7\xf5es",level:2}],c={toc:p},u="wrapper";function d(e){let{components:n,...a}=e;return(0,r.kt)(u,(0,t.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"O servidor Wppconnect \xe9 uma API pronta para usar, basta baixar, instalar e come\xe7ar a usar, simples assim."),(0,r.kt)("h2",{id:"requirements"},"Requisitos"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"Node.js")," vers\xe3o 16.14 ou superior (pode ser verificado usando ",(0,r.kt)("inlineCode",{parentName:"li"},"node -v"),"). Voc\xea pode usar o ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nvm-sh/nvm"},"nvm")," para gerenciar v\xe1rias vers\xf5es do n\xf3 em uma \xfanica m\xe1quina instalada.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Ao instalar o Node.js, \xe9 recomend\xe1vel que voc\xea marque todas as caixas de sele\xe7\xe3o relacionadas \xe0s depend\xeancias.")))),(0,r.kt)("h2",{id:"instala\xe7\xe3o"},"Instala\xe7\xe3o"),(0,r.kt)("p",null,"Instale as depend\xeancias e inicie o servidor."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yarn install\n//ou\nnpm install\n")),(0,r.kt)("h2",{id:"instalar-depend\xeancias-do-puppeteer"},"Instalar depend\xeancias do puppeteer:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"sudo apt-get install -y libxshmfence-dev libgbm-dev wget unzip fontconfig locales gconf-service libasound2 libatk1. -0 libc6 libcairo2 libcups2 libdbus-1-3 libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 libpango-1. -0 libpangocairo-1.0-0 libstdc+6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxext6 libxfixes3 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils\n")),(0,r.kt)("h2",{id:"clonar-reposit\xf3rio"},"Clonar reposit\xf3rio"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\ngit clone https://github.com/wppconnect-team/wppconnect-server.git && cd wppconnect-server\n\n")),(0,r.kt)("h2",{id:"instalar-google-chrome"},"Instalar Google Chrome"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\nwget -c https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb\n\nsudo apt-get update\n\nsudo apt-get install libappindicator1\n\nsudo dpkg -i google-chrome-stable_current_amd64.deb\n\n")),(0,r.kt)("h2",{id:"subir-o-servidor"},"Subir o servidor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yarn dev\n")),(0,r.kt)("h2",{id:"compilar-servidor"},"Compilar Servidor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yarn build\n")),(0,r.kt)("hr",null),(0,r.kt)("h1",{id:"configura\xe7\xe3o"},"Configura\xe7\xe3o"),(0,r.kt)("p",null,"Este servidor usa o arquivo config.ts para definir algumas op\xe7\xf5es, os valores padr\xe3o s\xe3o:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'{\n  /* chave secreta para gerar o token de acesso */\n  "secretKey": "ESTEEOMEUTOKENSEGURO",\n  "host": "http://localhost",\n  "port": "21465",\n  // cria o userDataDir para cada inst\xe2ncia puppeteer para trabalhar com v\xe1rios dispositivos\n  "customUserDataDir": ". userDataDir/",\n  // inicia todas as sess\xf5es quando se inicia o servidor.\n  "startAllSession": true,\n  // define o n\xfamero m\xe1ximo de listeners global. 0 = infinito.\n  "maxListeners": 15,\n  "webhook": {\n    "url": null,\n    // fazer download dos arquivos automaticamente para o webhook\n    "autoDownload": true,\n    //marcar mensagens como lida when o webhook returnar ok\n    "readMessage": false,\n    //enviar todas as mensagens ocmo n\xe3o lida par ao webhook quando o servidor iniciar\n    "allUnreadOnStart": true\n  },\n  //funcionalidade que arquiva conversas, executa quando o servidor inicia.\n  "archive": {\n    "enable": true,\n    //intervalo m\xe1ximo entre arquivamentos.\n    "waitTime": 10,\n    "diasToArchive": 45\n  },\n  "log": {\n    "level": "error",\n    "logger": [ "console", "file" ]\n  },\n  "createOptions": {\n    "browserArgs": ["--no-sandbox"]\n  }\n}\n')),(0,r.kt)("h1",{id:"chave-secreta"},"Chave Secreta"),(0,r.kt)("p",null,"Sua ",(0,r.kt)("inlineCode",{parentName:"p"},"secretkey")," est\xe1 dentro do arquivo ",(0,r.kt)("inlineCode",{parentName:"p"},"config.json"),". Voc\xea deve mudar o valor padr\xe3o para um que apenas voc\xea conhece.","# Gerar token"),(0,r.kt)("p",null,"Para gerar um token de acesso, voc\xea deve usar sua ",(0,r.kt)("inlineCode",{parentName:"p"},"SECRET_KEY"),"."),(0,r.kt)("p",null,"Usando o route:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'  curl -X POST --location "http://localhost:21465/api/mySession/eUsouSeCreTo/generate-token"\n')),(0,r.kt)("h3",{id:"resposta"},"Resposta:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": "Success",\n  "session": "mySession",\n  "token": "$2b$10$duQ5YYV6fojn5qFiFv.aEuY32_SnHgcmxdfxohnjG4EHJ5_Z6QWhe",\n  "wppconnect:$2b$10$duQ5YYV6fojn5qFiFv.aEuY32_SnHgcmxdfxohnjG4EHJ5_Z6QWhe"\n}\n')),(0,r.kt)("h1",{id:"usando-o-token"},"Usando o Token"),(0,r.kt)("p",null,'Salvar o valor da resposta "completa". Em seguida, use este valor para chamar os routers.'),(0,r.kt)("h1",{id:"exemplos"},"Exemplos"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'#Iniciando Sess\xe3o\n# /api/:session/start-session\n\ncurl -X POST --location "http://localhost:21465/api/mySession/start-session" \\\n    -H "Aceitar: application/json" \\\n    -H "Content-Type: application/json" \\\n    -H "Authorization: Bearer \\$2b\\$10\\$JcHd97xHN6ErBuiLd7Yu4. 6McvOvEZDQTQwev2MRK_zQObUZZ9C"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'#Obter QrCode\n# /api/:session/start-session\n# quando a sess\xe3o come\xe7a se o m\xe9todo for chamado novamente, ele retornar\xe1 o qrCode base64\n\ncurl -X POST --location "http://localhost:21465/api/mySession/start-session" \\\n    -H "Accept: application/json" \\\n    -H "Content-Type: application/json" \\\n    -H "Authorization: Bearer \\$2b\\$10\\$JcHd97xHN6ErBuiLd7Yu4. 6McvOvEZDQTQwev2MRK_zQObUZZ9C"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'#Enviar Mensagem\n# /api/:session/send-message\ncurl -X POST --location "http://localhost:21465/api/mySession/send-message" \\\n    -H "Content-Type: application/json; charset=utf-8" \\\n    -H "Accept: application/json" \\\n    -H "Authorization: Bearer \\$2b\\$10\\$8aQFQxnWREtBEMZK_iHMe. 7NeoNkjL7s6NYai_83Pb31Ycss6Igm" \\\n    -d "{\n          \\"telefone\\": \\"5511982743910\\",\n          \\"mensagem\\": \\"*Abner* Rodrigues\\"\n}"\n')),(0,r.kt)("p",null,"Veja o ",(0,r.kt)("inlineCode",{parentName:"p"},"arquivo de routes")," para todas as rotas. ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/wppconnect-team/wppconnect-server/blob/main/src/routes/index.ts"},"aqui")," e o arquivo HTTP ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/wppconnect-team/wppconnect-server/blob/main/requests.http"}),"."),(0,r.kt)("h2",{id:"documenta\xe7\xf5es"},"Documenta\xe7\xf5es"),(0,r.kt)("p",null,"Acessar nossa documenta\xe7\xe3o no ",(0,r.kt)("a",{parentName:"p",href:"https://documenter.getpostman.com/view/9139457/TzshF4jQ"},"postman")),(0,r.kt)("p",null,"Acesse nossa documenta\xe7\xe3o no ",(0,r.kt)("a",{parentName:"p",href:"https://wppconnect.io/swagger/wppconnect-server"},"Swagger")),(0,r.kt)("p",null,'Ou a UI Swagger no seu servidor. Acessar router: "IP:PORT/api-docs"'))}d.isMDXComponent=!0}}]);